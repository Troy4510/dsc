<!DOCTYPE html>
<html lang="en">


<head>
	<meta charset="UTF-8">
    <!-- <meta http-equiv="refresh" content="0">! -->
	<link rel="stylesheet" href="/static/style.css">
	<title>DSC_chat</title>
</head>


<body style="background-color: white;">
    <div class = "chat_logo">
        <img src={{url_for('static', filename = 'images/ds_logo.png')}} 
        style="width: 50%; height: auto;">
        <br>
        DSChat
    </div>

    <div class = "top_menu">
        <ul>
                <a href="/profile_selector/", style = 'color: white;'>Профиль</a> &emsp;
                <a href="#", style = 'color: white;'>Настройки</a> &emsp; 
                <a href="/logout/", style = 'color: white;'>Выход</a> &emsp; 
        </ul>
    </div>
    
    
    {% if history %}

        <div class = "chat_center"> 
        {% for msg in history %}
            <div class = "chat_question">
                {{msg.time_mark}} <br>
                {{msg.ask}}<br>
            </div>
            <br>
            <div class = "chat_answer">
                {{msg.time_mark}}<br>
                {{msg.answer}}<br>
            </div>
            <br>
            <br>
            <br>
        {% endfor %}
        </div>

    {% endif %}

    <div id = "tmp_block" class = "chat_center">
        <div id = "tmp_ask" class = "chat_question"></div>
        <br>
        <div class = "chat_answer">
            <div id = "tmp_answer" class = 'blink_text'></div>
        </div>
    </div>

    <div class = "chat_form">

    <form action="" method="post" onsubmit="submit_pushed()">
        <p>
	        <input  id="ask_field"
                    type="text" 
                    name="user_question" 
                    style="margin-left:5%; margin-right:5%; width:70%">
	    </p>
	    <p>
	        <input  id="submit_button"
                    type="submit" 
                    value="ОТПРАВИТЬ" 
                    style="background: rgb(58, 146, 175)
                    ">
	    </p>
    </form>
    </div>


    <script>

        function reloadPage() {
            window.location.reload();
        }
        
        function submit_pushed(){
            document.getElementById('tmp_block').style.display = 'block';
            document.getElementById('submit_button').disabled = true;
            let ask = document.getElementById('ask_field').value;
            document.getElementById('tmp_ask').textContent = ask;
            document.getElementById('tmp_answer').textContent = 'Запрос отправлен, ожидайте ответа...';
            window.scrollTo(0, document.body.scrollHeight);

        }

        document.getElementById('tmp_block').style.display = 'none';
        window.scrollTo(0, document.body.scrollHeight);

    </script>



</body>
